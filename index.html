<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, interactive-widget=resizes-content, maximum-scale=1.0, user-scalable=no">
    <title>Christo | Flutter Dev</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --bg-color: #0d1117;
            --text-primary: #e6edf3;
            --text-secondary: #8b949e;
            --accent-green: #238636;
            --accent-blue: #2f81f7;
            --border-color: #30363d;
            --font-stack: 'Fira Code', monospace;
            --cursor-color: #8b949e;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            background-color: var(--bg-color);
            color: var(--text-primary);
            font-family: var(--font-stack);
            margin: 0;
            height: 100dvh; 
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 20px;
            border-bottom: 1px solid var(--border-color);
            background: rgba(13, 17, 23, 0.95);
            z-index: 100;
            flex-shrink: 0;
        }

        .brand-container { display: flex; flex-direction: column; }
        .brand-name { font-weight: 600; font-size: 1rem; letter-spacing: -0.5px; }
        .brand-role { font-size: 0.75rem; color: var(--text-secondary); margin-top: 2px; }
        
        .header-right { 
            display: flex; gap: 15px; font-size: 0.8rem; color: var(--text-secondary); 
        }

        .nav-commands {
            padding: 10px 15px;
            background: rgba(13, 17, 23, 0.98);
            border-bottom: 1px solid var(--border-color);
            font-size: 0.9rem;
            display: flex;
            gap: 15px;
            overflow-x: auto; 
            white-space: nowrap;
            flex-shrink: 0;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .nav-commands::-webkit-scrollbar { display: none; }

        .nav-item { 
            color: var(--text-secondary); 
            cursor: pointer; 
            padding: 5px 5px; 
            border-radius: 4px;
        }
        .nav-item:active { color: var(--accent-blue); background: rgba(47, 129, 247, 0.1); }
        .separator { color: var(--border-color); opacity: 0.5; }

        #terminal-container {
            flex: 1;
            padding: 15px 20px;
            overflow-y: auto;
            cursor: text;
            scroll-behavior: smooth;
        }

        .output-line { margin-bottom: 10px; line-height: 1.5; white-space: pre-wrap; font-size: 0.95rem; }
        .cmd-keyword { color: var(--accent-blue); font-weight: bold; }
        .cmd-error { color: #f85149; }
        .cmd-success { color: #3fb950; }
        
        .input-line {
            display: flex;
            align-items: center;
            margin-top: 10px;
            position: relative;
            min-height: 40px;
        }

        .prompt {
            color: #3fb950;
            margin-right: 8px;
            font-weight: 600;
            white-space: nowrap;
            font-size: 0.95rem;
        }

        #cmd-display {
            color: var(--text-primary);
            font-family: var(--font-stack);
            font-size: 16px; 
            white-space: pre;
            min-height: 24px;
            word-break: break-all;
        }

        .cursor {
            display: inline-block;
            width: 10px;
            height: 1.2em;
            background-color: var(--cursor-color);
            vertical-align: middle;
            margin-left: 1px;
            animation: blink 1s step-end infinite;
        }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

        #cmd-input {
            position: absolute;
            opacity: 0;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            font-size: 16px; 
        }

        .intro-banner { 
            color: var(--accent-blue); 
            margin-bottom: 20px; 
            font-weight: bold; 
            font-size: 0.7rem; 
            line-height: 1.2;
        }

        @media (max-width: 600px) {
            .header-right { display: none; } 
            .intro-banner { font-size: 0.6rem; }
        }
    </style>
</head>
<body>

    <header>
        <div class="brand-container">
            <span class="brand-name">Christo</span>
            <span class="brand-role">Flutter Developer & Designer</span>
        </div>
        <div class="header-right">
            <span id="clock-display"></span>
        </div>
    </header>

    <div class="nav-commands">
        <span class="nav-item" onclick="runCmd('help')">help</span> <span class="separator">|</span>
        <span class="nav-item" onclick="runCmd('about')">about</span> <span class="separator">|</span>
        <span class="nav-item" onclick="runCmd('projects')">projects</span> <span class="separator">|</span>
        <span class="nav-item" onclick="runCmd('interests')">interests</span> <span class="separator">|</span>
        <span class="nav-item" onclick="runCmd('clear')">clear</span>
    </div>

    <div id="terminal-container" onclick="focusInput()">
        <div class="intro-banner">
            <pre>
   _____ _          _     _        
  / ____| |        (_)   | |       
 | |    | |__  _ __ _ ___| |_ ___  
 | |    | '_ \| '__| / __| __/ _ \ 
 | |____| | | | |  | \__ \ || (_) |
  \_____|_| |_|_|  |_|___/\__\___/ 
            </pre>
        </div>
        
        <div id="history"></div>
        
        <div class="input-line">
            <span class="prompt">christo@kerala:~$</span>
            <span id="cmd-display"></span><span class="cursor"></span>
            <input type="text" id="cmd-input" autocomplete="off" spellcheck="false">
        </div>
    </div>

    <script>
        const input = document.getElementById('cmd-input');
        const display = document.getElementById('cmd-display');
        const historyDiv = document.getElementById('history');
        const container = document.getElementById('terminal-container');
        const clockDisplay = document.getElementById('clock-display');

        // --- ðŸ”‘ API KEY CONFIGURATION ---
        const GEMINI_API_KEY = "AIzaSyAo7qoBFpVnrpaau7fJU-eSVErWToVBB3o"; 

        const files = {
            "about": "Hi! I'm <span class='cmd-keyword'>Christo</span>, a Flutter Developer and Designer based in Kerala.\nI am passionate about building clean, efficient mobile applications and exploring new technologies.",
            "skills": "â€¢ <span class='cmd-keyword'>Tech:</span> Flutter, Dart, GitHub Pages, Cloudflare\nâ€¢ <span class='cmd-keyword'>Design:</span> UI/UX, App Prototyping\nâ€¢ <span class='cmd-keyword'>Languages:</span> Malayalam, English",
            "projects": "1. <span class='cmd-keyword'>Music Streaming App</span> - Built with Flutter & Music APIs\n2. <span class='cmd-keyword'>Personal Site</span> - Hosted on Cloudflare Pages",
            "interests": "â€¢ <span class='cmd-keyword'>Coding:</span> Mobile Development, Open Source\nâ€¢ <span class='cmd-keyword'>Learning:</span> AI Integration, Backend Architecture\nâ€¢ <span class='cmd-keyword'>Tech:</span> Latest gadgets and software tools",
            "contact": "Email: christo@example.com\nGitHub: github.com/christo",
            "help": "Commands: help, about, projects, skills, interests, clear"
        };

        function updateTime() {
            const now = new Date();
            clockDisplay.innerText = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        }
        setInterval(updateTime, 1000);
        updateTime();

        function typeWriter(text, element, speed = 10) {
            let i = 0;
            function type() {
                if (i < text.length) {
                    element.innerHTML += text.charAt(i);
                    i++;
                    scrollToBottom();
                    setTimeout(type, speed);
                }
            }
            type();
        }

        setTimeout(() => {
            const welcomeLine = document.createElement('div');
            welcomeLine.className = 'output-line';
            historyDiv.appendChild(welcomeLine);
            const msg = "Welcome Christo! System is online. Ask me anything or type 'help'.";
            typeWriter(msg, welcomeLine, 20);
        }, 500);

        function focusInput() { 
            input.focus(); 
            scrollToBottom();
        }
        
        function scrollToBottom() {
            container.scrollTop = container.scrollHeight;
            window.scrollTo(0, document.body.scrollHeight);
        }

        input.addEventListener('focus', () => { setTimeout(scrollToBottom, 300); });
        input.addEventListener('input', function() { display.innerText = this.value; scrollToBottom(); });
        input.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                const cmd = this.value.trim();
                if (cmd) { processCommand(cmd); }
                this.value = ''; display.innerText = '';
            }
        });

        async function processCommand(cmd) {
            const parts = cmd.split(' ');
            const lowerCmd = parts[0].toLowerCase();

            const cmdLine = document.createElement('div');
            cmdLine.className = 'output-line';
            cmdLine.innerHTML = `<span class="prompt">christo@kerala:~$</span> ${cmd}`;
            historyDiv.appendChild(cmdLine);

            const output = document.createElement('div');
            output.className = 'output-line';
            historyDiv.appendChild(output);

            if (lowerCmd === 'clear') { historyDiv.innerHTML = ''; } 
            else if (files[lowerCmd]) { output.innerHTML = files[lowerCmd]; } 
            else {
                // Default to AI for any unknown command
                output.innerText = "Thinking...";
                try {
                    const aiResponse = await fetchGeminiResponse(cmd);
                    output.innerText = ""; 
                    typeWriter(aiResponse, output, 5);
                } catch (error) {
                    output.className += ' cmd-error';
                    output.innerText = "Error: " + error.message;
                }
            }
            scrollToBottom();
        }

        function runCmd(cmd) {
            input.value = cmd; display.innerText = cmd; input.focus();
            setTimeout(() => { processCommand(cmd); input.value = ''; display.innerText = ''; }, 100);
        }

        async function fetchGeminiResponse(userPrompt) {
            const systemContext = `You are the AI assistant for Christo's portfolio.
            Christo is a Flutter Developer and Designer from Kerala, India.
            
            Key Facts about Christo:
            - Builds Music Apps in Flutter.
            - Professional Software Engineer.
            - Interested in modern UI/UX design.
            
            Keep answers short (max 2 sentences). Be cool and tech-savvy.`;

            const modelName = "gemini-2.5-flash"; 
            const url = `https://generativelanguage.googleapis.com/v1beta/models/${modelName}:generateContent?key=${GEMINI_API_KEY}`;

            const response = await fetch(url, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ contents: [{ parts: [{ text: systemContext + "\n\nUser: " + userPrompt }] }] })
            });

            const data = await response.json();
            if (data.error) throw new Error(data.error.message);
            return data.candidates[0].content.parts[0].text;
        }
    </script>
</body>
</html>
